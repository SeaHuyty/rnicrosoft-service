"""
SAFE Malware Simulation Demo
This simulates malware behavior WITHOUT causing real harm
Run Guardian AV first, then run this to see protection in action
"""

import os
import sys
import time
import threading

print("=" * 60)
print("  SAFE MALWARE SIMULATION")
print("  This demonstrates how Guardian AV protects you")
print("=" * 60)
print()
print("‚ö†Ô∏è  This is a SAFE simulation - no real harm will occur")
print()

# Make sure Guardian AV is running
input("Press ENTER after you have Guardian AV running with protection ON...")

print()
print("Starting simulations in 3 seconds...")
time.sleep(3)

# ============================================
# SIMULATION 1: Create suspicious files
# ============================================
print()
print("[SIMULATION 1] Creating suspicious files...")
print("-" * 40)

test_dir = "test_demo"
os.makedirs(test_dir, exist_ok=True)

# Create a file that looks like spyware
spyware_file = os.path.join(test_dir, "simulated_keylogger.py")
with open(spyware_file, 'w') as f:
    f.write("""
# SIMULATED KEYLOGGER - HARMLESS
import pynput.keyboard
BOT_TOKEN = "telegram_exfil_token"
from PIL import ImageGrab
def on_key_press(key):
    # This would log keystrokes
    pass
""")
print(f"  Created: {spyware_file}")
print("  ‚Üí Guardian should detect: KEYLOGGER, DATA_EXFILTRATION")

time.sleep(2)

# Create a file that looks like ransomware
ransom_file = os.path.join(test_dir, "simulated_ransomware.py")
with open(ransom_file, 'w') as f:
    f.write("""
# SIMULATED RANSOMWARE - HARMLESS
import winreg
key = "WindowsSystemUpdate"
def add_to_startup():
    # This would add persistence
    pass
def lock_screen():
    # This would lock the screen
    pass
encrypted_ext = ".enc"
""")
print(f"  Created: {ransom_file}")
print("  ‚Üí Guardian should detect: REGISTRY_PERSISTENCE, SCREEN_LOCKER")

time.sleep(2)

# ============================================
# SIMULATION 2: Simulate process behavior
# ============================================
print()
print("[SIMULATION 2] Simulating suspicious process names...")
print("-" * 40)
print("  In a real attack, Guardian would detect:")
print("  ‚Ä¢ pythonw.exe running hidden (screen locker)")
print("  ‚Ä¢ python.exe with pynput import (keylogger)")
print("  ‚Ä¢ Processes accessing Chrome Login Data")
print()

# ============================================
# SIMULATION 3: Simulate registry access
# ============================================
print()
print("[SIMULATION 3] Simulating registry persistence attempt...")
print("-" * 40)
print("  In a real attack, malware would try to add:")
print("  ‚Ä¢ HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run")
print("  ‚Ä¢ Value: WindowsSystemUpdate")
print("  ‚Üí Guardian monitors these keys and blocks malicious entries")
print()

# ============================================
# SIMULATION 4: Show what Guardian blocks
# ============================================
print()
print("[SIMULATION 4] What Guardian AV protects against:")
print("-" * 40)

protection_demo = [
    ("Keylogger (pynput)", "Detects keyboard listener imports"),
    ("Screenshot Spy (ImageGrab)", "Detects screen capture code"),
    ("Webcam Spy (cv2)", "Detects camera access patterns"),
    ("Password Stealer", "Detects Chrome Login Data access"),
    ("Telegram Exfil", "Detects BOT_TOKEN and API calls"),
    ("Registry Persistence", "Monitors Run/RunOnce keys"),
    ("Screen Locker", "Emergency kill button available"),
    ("VBS/BAT Scripts", "Monitors AppData for malicious scripts"),
]

for threat, protection in protection_demo:
    print(f"  üö® {threat}")
    print(f"     ‚úÖ {protection}")
    print()

# ============================================
# Cleanup
# ============================================
print()
print("=" * 60)
print("  SIMULATION COMPLETE")
print("=" * 60)
print()
print("Check Guardian AV:")
print("  1. Dashboard ‚Üí Look for threat alerts")
print("  2. Alerts tab ‚Üí See detected threats")
print("  3. Emergency tab ‚Üí Tools ready if needed")
print()

# Clean up test files
cleanup = input("Clean up test files? (y/n): ")
if cleanup.lower() == 'y':
    try:
        os.remove(spyware_file)
        os.remove(ransom_file)
        print("Test files cleaned up!")
    except:
        pass

print()
print("Demo complete! Your Guardian AV is protecting you. üõ°Ô∏è")
